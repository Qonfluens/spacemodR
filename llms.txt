# spacemodR

[![Documentation](https://img.shields.io/badge/documentation-online-blue.svg)](https://qonfluens.github.io/spacemodr/)

**Spacemod Habitat, Trophic, Dispersal, Exposure and Risk Mapping**

`spacemodR` is an R package designed for spatial ecological risk
modeling. It integrates habitats, trophic webs, dispersal, and
contaminant exposure to build complex ‚Äúspacemodels‚Äù linking geographic
data (rasters, vectors) with biological interactions.

## üì¶ Installation

The package is automatically built via GitHub Actions. You can install
it by retrieving the archive generated by the continuous integration
system.

### Via GitHub Action Artifact

The `.github/workflows/build_and_release.yaml` workflow is configured to
build the package and check its integrity on every push to the `main`
branch. To install the latest version:

1.  Go to the **Actions** tab of the GitHub repository.
2.  Click on the latest run of the **‚ÄúBuild and Archive‚Äù** workflow.
3.  At the bottom of the page, in the **Artifacts** section, download
    the `spacemodR-archive` file.
4.  Unzip the file to obtain the `.tar.gz` source file.
5.  Install the package in R using the following command:

``` r
# Replace the path with the location of your downloaded file
install.packages("path/to/spacemodR_0.1.0.tar.gz", repos = NULL, type = "source")
```

Note: Ensure that system dependencies (GDAL, PROJ, GEOS) are installed,
as the package depends on `sf` and `terra`.

# Using the docker file

    docker build -t spacemodr .

    docker run --rm -ti \
      -p 8787:8787 \
      -e PASSWORD=mdp \
      -v /home/virgile/Downloads:/home/rstudio/data \
      spacemodr

Go to `http://localhost:8787`, where user is `rstudio` and password:
`mdp`.

# Package index

## All functions

- [`add_habitat()`](https://qonfluens.github.io/spacemodr/reference/add_habitat.md)
  : Add habitat zones to a Habitat object
- [`add_link()`](https://qonfluens.github.io/spacemodr/reference/add_link.md)
  : Add links to a trophic table
- [`add_nohabitat()`](https://qonfluens.github.io/spacemodr/reference/add_nohabitat.md)
  : Add non-habitat zones to a Habitat object
- [`compute_dispersal()`](https://qonfluens.github.io/spacemodr/reference/compute_dispersal.md)
  : Compute dispersal or spread map (Generic Engine)
- [`compute_kernel()`](https://qonfluens.github.io/spacemodr/reference/compute_kernel.md)
  : Create a 2D Gaussian motion kernel as a SpatRaster
- [`dispersal()`](https://qonfluens.github.io/spacemodr/reference/dispersal.md)
  : Disperse a species or variable over the landscape
- [`flux()`](https://qonfluens.github.io/spacemodr/reference/flux.md) :
  Apply trophic flux from a resource layer
- [`get_departements_for_roi()`](https://qonfluens.github.io/spacemodr/reference/get_departements_for_roi.md)
  : Identify codes of departments intersecting a region of interest
- [`get_ocsge_data_fgb()`](https://qonfluens.github.io/spacemodr/reference/get_ocsge_data_fgb.md)
  : Collect data from OCS GE repository using FlatGeobuf on S3
- [`habitat()`](https://qonfluens.github.io/spacemodr/reference/habitat.md)
  : Create a Habitat object
- [`habitat_raster()`](https://qonfluens.github.io/spacemodr/reference/habitat_raster.md)
  : Create a raster from a habitat object
- [`intake()`](https://qonfluens.github.io/spacemodr/reference/intake.md)
  : Constructor for Intake Parameters
- [`is_cyclic()`](https://qonfluens.github.io/spacemodr/reference/is_cyclic.md)
  : Test if a directed graph is cyclic
- [`load_raster_extdata()`](https://qonfluens.github.io/spacemodr/reference/load_raster_extdata.md)
  : load raster file from internal data
- [`lower_neighbors()`](https://qonfluens.github.io/spacemodr/reference/lower_neighbors.md)
  : Get resource layers for a given trophic layer
- [`normalize_weights()`](https://qonfluens.github.io/spacemodr/reference/normalize_weights.md)
  : Normalize weights of a trophic table
- [`ocsge_metaleurop`](https://qonfluens.github.io/spacemodr/reference/ocsge_metaleurop.md)
  : SF object defining very simplified OCS-GE soil cover metaleurop
- [`plot(`*`<trophic_tbl>`*`)`](https://qonfluens.github.io/spacemodr/reference/plot.trophic_tbl.md)
  : Plot a trophic table
- [`raster_stack()`](https://qonfluens.github.io/spacemodr/reference/raster_stack.md)
  : Create a RasterStack from a list of rasters and names
- [`ref_ocsge`](https://qonfluens.github.io/spacemodr/reference/ref_ocsge.md)
  : Nomenclature of OCS-GE soil cover
- [`roi_metaleurop`](https://qonfluens.github.io/spacemodr/reference/roi_metaleurop.md)
  : SF object defining ROI metaleurop
- [`spacemodel()`](https://qonfluens.github.io/spacemodr/reference/spacemodel.md)
  : Create a spacemodel object
- [`` `[`( ``*`<trophic_tbl>`*`)`](https://qonfluens.github.io/spacemodr/reference/sub-.trophic_tbl.md)
  : Subset method for trophic_tbl
- [`transfer()`](https://qonfluens.github.io/spacemodr/reference/transfer.md)
  : Transfer (food, contaminant) across trophic levels
- [`trophic()`](https://qonfluens.github.io/spacemodr/reference/trophic.md)
  : Create a trophic table

# Articles

### All vignettes

- [Example_Berisp](https://qonfluens.github.io/spacemodr/articles/Example_Berisp_full.md):
- [Example_Beris_simple](https://qonfluens.github.io/spacemodr/articles/Example_Berisp_simple.md):
- [Tutorial](https://qonfluens.github.io/spacemodr/articles/Tutorial.md):
- [Using_External_Dispersal](https://qonfluens.github.io/spacemodr/articles/Using_External_Dispersal.md):
